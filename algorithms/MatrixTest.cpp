#include "Matrix.hpp"
#include "catch.hpp"

using namespace Matrix;

TEST_CASE("Spiral", "[Matrix]")
{
    CHECK(TraverseMatrixSpiral({{ 0 }}) == { 0 });
    CHECK(TraverseMatrixSpiral({ { 0, 1 }, 
                                 { 2, 3 } }) == { 0, 1, 3, 2 });

    CHECK(TraverseMatrixSpiral({ { 0, 1, 2 }, 
                                 { 3, 4, 5 },
                                 { 6, 7, 8 } }) == { 0, 1, 2, 5, 8, 7, 6, 3, 4 });

    CHECK(TraverseMatrixSpiral({ { 0,  1,  2,  3  }, 
                                 { 4,  5,  6,  7  },
                                 { 8,  9,  10, 11 },
                                 { 12, 13, 14, 15 }}) == { 0, 1, 2, 3, 7, 11, 15, 14, 13, 12, 8, 4, 5, 6, 10, 9 });
}

TEST_CASE("Hourglass", "[Matrix]")
{
    SECTION("3x3")
    {
        CHECK(GetHourglassMaxSum({ { 9, 9, 9 },
                                   { 1, 9, 4 },
                                   { 9, 9, 9 } }) == 63);
    }

    SECTION("4x4")
    {
        // upper left
        CHECK(GetHourglassMaxSum({ { 9, 9, 9, 4},
                                   { 1, 9, 4, 1},
                                   { 9, 9, 9, 4},
                                   { 1, 0, 0, 0} }) == 63);

        // upper right
        CHECK(GetHourglassMaxSum({ { 1, 4, 4, 4},
                                   { 1, 1, 4, 1},
                                   { 1, 4, 4, 4},
                                   { 1, 0, 0, 0} }) == 28);

        // lower left
        CHECK(GetHourglassMaxSum({ { 1, 4, 4, 4},
                                   { 5, 5, 5, 1},
                                   { 1, 5, 4, 4},
                                   { 5, 5, 5, 0} }) == 35);

        // lower right
        CHECK(GetHourglassMaxSum({ { 1, 4, 4, 4},
                                   { 5, 8, 8, 8},
                                   { 1, 5, 8, 4},
                                   { 5, 8, 8, 8} }) == 56);
    }

    SECTION("10x10")
    {
        CHECK(GetHourglassMaxSum({ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } }) == 0);

        // in the middle somewhere
        CHECK(GetHourglassMaxSum({ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 9, 9, 9, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 9, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 9, 9, 9, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
                                   { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } }) == 63);

        // less negative is better than really negative
        CHECK(GetHourglassMaxSum({ { -100, -100, -100, -100, -100, -100, -100, -100, -100, -100 },
                                   { -100, -100, -100, -100, -100, -100, -100, -100, -100, -100 },
                                   { -100, -100, -100, -100, -100, -100, -100, -100, -100, -100 },
                                   { -100, -100, -100, -100, -100, -100, -100, -100, -100, -100 },
                                   { -100, -100, -100, -100, -100, -100, -100, -100, -100, -100 },
                                   { -100, -100, -100, -100, -001, -001, -001, -100, -100, -100 },
                                   { -100, -100, -100, -100, -100, -001, -100, -100, -100, -100 },
                                   { -100, -100, -100, -100, -001, -001, -001, -100, -100, -100 },
                                   { -100, -100, -100, -100, -100, -100, -100, -100, -100, -100 },
                                   { -100, -100, -100, -100, -100, -100, -100, -100, -100, -100 } }) == -007);
    }
}
